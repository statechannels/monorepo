## API Report File for "@statechannels/server-wallet"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Address } from '@statechannels/wallet-core';
import { AllocationItem } from '@statechannels/nitro-protocol';
import { AssetOutcome } from '@statechannels/nitro-protocol';
import { ChannelConstants } from '@statechannels/wallet-core';
import { ChannelId } from '@statechannels/client-api-schema';
import { ChannelResult } from '@statechannels/client-api-schema';
import { CloseChannel } from '@statechannels/wallet-core';
import { CloseChannelParams } from '@statechannels/client-api-schema';
import { Config } from 'knex';
import { CreateChannelParams } from '@statechannels/client-api-schema';
import { DefundChannel } from '@statechannels/wallet-core';
import { Destination } from '@statechannels/wallet-core';
import { ethers } from 'ethers';
import EventEmitter from 'eventemitter3';
import { FundingStatus } from '@statechannels/client-api-schema';
import { FundingStrategy } from '@statechannels/client-api-schema';
import { GetStateParams } from '@statechannels/client-api-schema';
import { JoinChannelParams } from '@statechannels/client-api-schema';
import { JSONSchema } from 'objection';
import Knex from 'knex';
import { Level } from 'pino';
import { Logger } from 'pino';
import { Payload as Message } from '@statechannels/wallet-core';
import { MessageQueuedNotification } from '@statechannels/client-api-schema';
import { Model } from 'objection';
import { ModelOptions } from 'objection';
import { Objective } from '@statechannels/wallet-core';
import { OpenChannel } from '@statechannels/wallet-core';
import { Outcome } from '@statechannels/wallet-core';
import { Participant } from '@statechannels/wallet-core';
import { Participant as Participant_2 } from '@statechannels/client-api-schema';
import { Payload } from '@statechannels/wire-format';
import { Pojo } from 'objection';
import { PrivateKey } from '@statechannels/wallet-core';
import { providers } from 'ethers';
import { QueryContext } from 'objection';
import { SignatureEntry } from '@statechannels/wallet-core';
import { SignedState } from '@statechannels/wallet-core';
import { SignedState as SignedState_2 } from '@statechannels/wire-format';
import { SignedStateVarsWithHash } from '@statechannels/wallet-core';
import { SignedStateWithHash } from '@statechannels/wallet-core';
import { SimpleAllocation } from '@statechannels/wallet-core';
import { State } from '@statechannels/wallet-core';
import { StateVariables } from '@statechannels/wallet-core';
import { StateWithHash } from '@statechannels/wallet-core';
import { SubmitChallenge } from '@statechannels/wallet-core';
import { SyncChannelParams } from '@statechannels/client-api-schema';
import { Transaction } from 'objection';
import { TransactionOrKnex } from 'objection';
import { Uint256 as Uint256_2 } from '@statechannels/wallet-core';
import { UpdateChannelParams } from '@statechannels/client-api-schema';
import { ValidationErrorItem } from 'joi';

// Warning: (ae-forgotten-export) The symbol "ChainServiceArgs" needs to be exported by the entry point index.d.ts
//
// @public
export type ChainServiceConfiguration = {
    attachChainService: boolean;
} & Partial<Exclude<ChainServiceArgs, 'logger'>>;

// @public
export type DatabaseConfiguration = RequiredDatabaseConfiguration & OptionalDatabaseConfiguration;

// @public
export type DatabaseConnectionConfiguration = RequiredConnectionConfiguration & Partial<OptionalConnectionConfiguration>;

// @public
export type DatabasePoolConfiguration = {
    max?: number;
    min?: number;
};

// @public
export class DBAdmin {
    static createDatabase(config: IncomingServerWalletConfig): Promise<void>;
    static createDatabaseFromKnex(knex: Knex): Promise<void>;
    static dropDatabase(config: IncomingServerWalletConfig): Promise<void>;
    static dropDatabaseFromKnex(knex: Knex): Promise<void>;
    static migrateDatabase(config: IncomingServerWalletConfig): Promise<void>;
    static migrateDatabaseFromKnex(knex: Knex): Promise<void>;
    static truncateDatabase(config: IncomingServerWalletConfig, tables?: string[]): Promise<void>;
    static truncateDataBaseFromKnex(knex: Knex, tables?: string[]): Promise<void>;
}

// @public (undocumented)
export type DeepPartial<T> = {
    [P in keyof T]?: DeepPartial<T[P]>;
};

// @public (undocumented)
export const DEFAULT_DB_NAME = "server_wallet_test";

// @public (undocumented)
export const DEFAULT_DB_USER = "postgres";

// @public (undocumented)
export const defaultChainServiceConfiguration: {
    attachChainService: boolean;
};

// @public
export const defaultConfig: OptionalServerWalletConfig;

// @public (undocumented)
export const defaultDatabaseConfiguration: OptionalDatabaseConfiguration & {
    connection: {
        host: string;
        port: number;
        user: string;
    };
};

// @public
export const defaultLoggingConfiguration: LoggingConfiguration;

// @public (undocumented)
export const defaultMetricsConfiguration: {
    timingMetrics: boolean;
};

// Warning: (ae-forgotten-export) The symbol "HasDatabaseConnectionConfigObject" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export const defaultTestConfig: (partialConfig?: DeepPartial<ServerWalletConfig & HasDatabaseConnectionConfigObject>) => ServerWalletConfig & HasDatabaseConnectionConfigObject;

// @public (undocumented)
export const defaultTestNetworkConfiguration: NetworkConfiguration;

// @public (undocumented)
export function extractDBConfigFromServerWalletConfig(serverWalletConfig: ServerWalletConfig): Config;

// Warning: (ae-forgotten-export) The symbol "DatabaseConnectionConfigObject" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export function getDatabaseConnectionConfig(config: ServerWalletConfig): DatabaseConnectionConfigObject & {
    host: string;
    port: number;
};

// @public
export type IncomingServerWalletConfig = RequiredServerWalletConfig & Partial<OptionalServerWalletConfig>;

// @public
export type LoggingConfiguration = {
    logLevel: Level;
    logDestination: string;
};

export { Message }

// @public
export type MetricsConfiguration = {
    timingMetrics: boolean;
    metricsOutputFile?: string;
};

// @public (undocumented)
export type MultipleChannelOutput = {
    outbox: Outgoing[];
    channelResults: ChannelResult[];
    newObjectives: DBObjective[];
};

// @public
export class MultiThreadedWallet extends SingleThreadedWallet {
    protected constructor(walletConfig: IncomingServerWalletConfig);
    // (undocumented)
    static create(walletConfig: IncomingServerWalletConfig): Promise<MultiThreadedWallet>;
    // (undocumented)
    destroy(): Promise<void>;
    // (undocumented)
    pushMessage(rawPayload: unknown): Promise<MultipleChannelOutput>;
    // (undocumented)
    pushUpdate(rawPayload: unknown): Promise<SingleChannelOutput>;
    // (undocumented)
    updateChannel(args: UpdateChannelParams): Promise<SingleChannelOutput>;
    // (undocumented)
    warmUpThreads(): Promise<void>;
    }

// @public
export type NetworkConfiguration = {
    chainNetworkID: number;
};

// @public
export type OptionalConnectionConfiguration = {
    port: number;
} | string;

// @public (undocumented)
export type OptionalDatabaseConfiguration = {
    pool?: DatabasePoolConfiguration;
    debug?: boolean;
    connection: OptionalConnectionConfiguration;
};

// @public
export interface OptionalServerWalletConfig {
    // (undocumented)
    chainServiceConfiguration: ChainServiceConfiguration;
    // (undocumented)
    databaseConfiguration: OptionalDatabaseConfiguration;
    // (undocumented)
    loggingConfiguration: LoggingConfiguration;
    // (undocumented)
    metricsConfiguration: MetricsConfiguration;
    // (undocumented)
    skipEvmValidation: boolean;
    // (undocumented)
    workerThreadAmount: number;
}

// Warning: (ae-forgotten-export) The symbol "Notice" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type Outgoing = Notice;

// @public (undocumented)
export type Output = SingleChannelOutput | MultipleChannelOutput;

// Warning: (ae-forgotten-export) The symbol "PartialConfigObject" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export function overwriteConfigWithDatabaseConnection(config: ServerWalletConfig, databaseConnectionConfig: PartialConfigObject | string): ServerWalletConfig;

// @public
export type RequiredConnectionConfiguration = {
    database: string;
    host: string;
    user: string;
    password?: string;
} | string;

// @public
export type RequiredDatabaseConfiguration = {
    connection: RequiredConnectionConfiguration;
};

// @public
export type RequiredServerWalletConfig = {
    databaseConfiguration: RequiredDatabaseConfiguration;
    networkConfiguration: NetworkConfiguration;
};

// @public
export type ServerWalletConfig = RequiredServerWalletConfig & OptionalServerWalletConfig;

// @public (undocumented)
export type SingleChannelOutput = {
    outbox: Outgoing[];
    channelResult: ChannelResult;
    newObjective: DBObjective | undefined;
};

// Warning: (ae-forgotten-export) The symbol "EventEmitterType" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "ChainEventSubscriberInterface" needs to be exported by the entry point index.d.ts
//
// @public
export class SingleThreadedWallet extends EventEmitter<EventEmitterType> implements WalletInterface, ChainEventSubscriberInterface {
    protected constructor(walletConfig: IncomingServerWalletConfig);
    addSigningKey(privateKey: PrivateKey): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "AssetOutcomeUpdatedArg" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    assetOutcomeUpdated({ channelId, assetHolderAddress, externalPayouts, }: AssetOutcomeUpdatedArg): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "ChainServiceInterface" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    chainService: ChainServiceInterface;
    challenge(channelId: string): Promise<SingleChannelOutput>;
    // Warning: (ae-forgotten-export) The symbol "ChallengeRegisteredArg" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    challengeRegistered(arg: ChallengeRegisteredArg): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "ChannelFinalizedArg" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    channelFinalized(arg: ChannelFinalizedArg): Promise<void>;
    closeChannel({ channelId }: CloseChannelParams): Promise<SingleChannelOutput>;
    closeChannels(channelIds: Bytes32[]): Promise<MultipleChannelOutput>;
    // (undocumented)
    static create(walletConfig: IncomingServerWalletConfig): Promise<SingleThreadedWallet>;
    createChannel(args: CreateChannelParams): Promise<MultipleChannelOutput>;
    createChannels(args: CreateChannelParams, numberOfChannels: number): Promise<MultipleChannelOutput>;
    createLedgerChannel(args: Pick<CreateChannelParams, 'participants' | 'allocations' | 'challengeDuration'>, fundingStrategy?: 'Direct' | 'Fake'): Promise<SingleChannelOutput>;
    destroy(): Promise<void>;
    getChannels(): Promise<MultipleChannelOutput>;
    getLedgerChannels(assetHolderAddress: string, participants: Participant_2[]): Promise<MultipleChannelOutput>;
    getObjective(objectiveId: string): Promise<DBObjective>;
    getSigningAddress(): Promise<Address>;
    getState({ channelId }: GetStateParams): Promise<SingleChannelOutput>;
    // Warning: (ae-forgotten-export) The symbol "HoldingUpdatedArg" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    holdingUpdated({ channelId, amount, assetHolderAddress }: HoldingUpdatedArg): Promise<void>;
    joinChannel({ channelId }: JoinChannelParams): Promise<SingleChannelOutput>;
    joinChannels(channelIds: ChannelId[]): Promise<MultipleChannelOutput>;
    // (undocumented)
    knex: Knex;
    // Warning: (ae-forgotten-export) The symbol "LedgerManager" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    ledgerManager: LedgerManager;
    // (undocumented)
    logger: Logger;
    static mergeOutputs(output: Output[]): MultipleChannelOutput;
    // Warning: (ae-forgotten-export) The symbol "ObjectiveManager" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    objectiveManager: ObjectiveManager;
    pushMessage(rawPayload: unknown): Promise<MultipleChannelOutput>;
    pushUpdate(rawPayload: unknown): Promise<SingleChannelOutput>;
    registerAppBytecode(appDefinition: string, bytecode: string): Promise<void>;
    registerAppDefinition(appDefinition: string): Promise<void>;
    // Warning: (ae-forgotten-export) The symbol "Store" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    store: Store;
    syncChannel({ channelId }: SyncChannelParams): Promise<SingleChannelOutput>;
    // Warning: (ae-forgotten-export) The symbol "Bytes32" needs to be exported by the entry point index.d.ts
    syncChannels(channelIds: Bytes32[]): Promise<MultipleChannelOutput>;
    updateChannel({ channelId, allocations, appData, }: UpdateChannelParams): Promise<SingleChannelOutput>;
    updateChannelFunding(args: UpdateChannelFundingParams): Promise<SingleChannelOutput>;
    updateFundingForChannels(args: UpdateChannelFundingParams[]): Promise<MultipleChannelOutput>;
    // (undocumented)
    readonly walletConfig: ServerWalletConfig;
}

// @public (undocumented)
export interface UpdateChannelFundingParams {
    // Warning: (ae-forgotten-export) The symbol "Uint256" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    amount: Uint256;
    // (undocumented)
    assetHolderAddress?: Address;
    // (undocumented)
    channelId: ChannelId;
}

// @public (undocumented)
export function validateServerWalletConfig(config: Record<string, any>): {
    valid: boolean;
    value: ServerWalletConfig | undefined;
    errors: ValidationErrorItem[];
};

// @public
export abstract class Wallet extends SingleThreadedWallet implements WalletInterface {
    // (undocumented)
    static create(walletConfig: IncomingServerWalletConfig): Promise<SingleThreadedWallet | MultiThreadedWallet>;
}

// Warning: (ae-forgotten-export) The symbol "ChannelUpdatedEvent" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "ObjectiveStarted" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "ObjectiveSucceeded" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type WalletEvent = ChannelUpdatedEvent | ObjectiveStarted | ObjectiveSucceeded;

// @public (undocumented)
export interface WalletInterface {
    // (undocumented)
    challenge(channelId: string): Promise<SingleChannelOutput>;
    // (undocumented)
    closeChannel(args: CloseChannelParams): Promise<SingleChannelOutput>;
    // (undocumented)
    createChannels(args: CreateChannelParams, numberOfChannels: number): Promise<MultipleChannelOutput>;
    // (undocumented)
    getChannels(): Promise<MultipleChannelOutput>;
    // (undocumented)
    getState(args: GetStateParams): Promise<SingleChannelOutput>;
    // (undocumented)
    joinChannels(channelIds: ChannelId[]): Promise<MultipleChannelOutput>;
    // (undocumented)
    pushMessage(m: unknown): Promise<MultipleChannelOutput>;
    // (undocumented)
    pushUpdate(m: unknown): Promise<SingleChannelOutput>;
    // (undocumented)
    registerAppBytecode(appDefinition: string, bytecode: string): Promise<void>;
    // (undocumented)
    registerAppDefinition(appDefinition: string): Promise<void>;
    // (undocumented)
    syncChannel(args: SyncChannelParams): Promise<SingleChannelOutput>;
    // (undocumented)
    syncChannels(chanelIds: Bytes32[]): Promise<MultipleChannelOutput>;
    // (undocumented)
    updateChannel(args: UpdateChannelParams): Promise<SingleChannelOutput>;
    // (undocumented)
    updateFundingForChannels(args: UpdateChannelFundingParams[]): Promise<MultipleChannelOutput>;
}


// Warnings were encountered during analysis:
//
// src/wallet/types.ts:30:3 - (ae-forgotten-export) The symbol "DBObjective" needs to be exported by the entry point index.d.ts

```
